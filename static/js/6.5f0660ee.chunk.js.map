{"version":3,"sources":["pages/Details/Details.js"],"names":["Content","DetailsComponent","className","useState","personData","setPersonData","setIncomeValue","dw","setDw","isLoading","setIsLoading","unRealizedPnl","setUnrealizedPnl","fundPnl","setFundPnl","unrealizedDividend","setUnrealizedDividend","userTable","setUserTable","userUnrealizedDividendSeries","setUserUnrealizedDividendSeries","user","useParams","useEffect","fetchCharts","a","Promise","all","axios","get","person","data","dwData","reverse","map","item","i","key","unrealizedPnlResult","x","getNumberWithDecimal","fundPnlResult","incomeValue","unrealized_dividend","user_unrealized_dividend","user_table","length","unrealizedDividendValue","userUnrealizedDividendResult","Object","keys","userTableData","name","total","unrealizedPnl","unrealizedAllocation","real","userTableDataTotal","reduce","acc","curr","series","step","prefix","Array","from","type","areaStyle","stack","showSymbol","hoverAnimation","lineStyle","width","fetchT1","userOption","baseOption","title","text","textStyle","fontSize","tooltip","trigger","axisPointer","label","backgroundColor","legend","right","top","grid","left","bottom","containLabel","xAxis","boundaryGap","splitLine","show","axisLine","color","yAxis","axisLabel","formatter","splitNumber","media","query","maxWidth","option","getNumberFormat","itemStyle","columns","dataIndex","render","row","index","isNaN","toLocaleString","getNumberColor","columnsExchangeDetails","dayjs","format","price","amount","result","Number","gutter","sm","xs","style","marginBottom","value","precision","showLoading","toFixed","dataSource","len","getLastestDataHandleValue","isNormal","suffix","getLastestDataShare","getLastestDataCost","arr","obj","date","cost","share","marketValue","Details","styled"],"mappings":"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","file":"static/js/6.5f0660ee.chunk.js","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Layout, Row, Divider, Card, Col, Table } from \"antd\";\nimport axios from \"axios\";\nimport echarts from \"echarts\";\nimport { useParams } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport dayjs from \"dayjs\";\nimport {\n  getNumberColor,\n  getNumberFormat,\n  getNumberWithDecimal,\n} from \"../../utils\";\nimport { Statistic, LineChart } from \"../../components\";\n\nconst { Content } = Layout;\n\nexport const DetailsComponent = ({ className }) => {\n  const [personData, setPersonData] = useState([]);\n  const [incomeValue, setIncomeValue] = useState([]);\n  const [dw, setDw] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [unRealizedPnl, setUnrealizedPnl] = useState([]);\n  const [fundPnl, setFundPnl] = useState([]);\n  const [unrealizedDividend, setUnrealizedDividend] = useState(\"--\");\n  const [userTable, setUserTable] = useState([]);\n  const [\n    userUnrealizedDividendSeries,\n    setUserUnrealizedDividendSeries,\n  ] = useState([]);\n  const { user } = useParams();\n  useEffect(() => {\n    const fetchCharts = async () => {\n      const [{ data: person }, { data: dwData }] = await Promise.all([\n        axios.get(\n          `https://raw.githubusercontent.com/odofmine/fund/main/t1/accounts/${user}/main.json`\n        ),\n        axios.get(\n          `https://raw.githubusercontent.com/odofmine/fund/main/t1/accounts/${user}/dw.json`\n        ),\n      ]);\n      setPersonData(person);\n      setDw(\n        [...dwData].reverse().map((item, i) => {\n          return {\n            ...item,\n            key: i,\n          };\n        })\n      );\n      //用户未实现收益\n      const unrealizedPnlResult = person.map((x, i) => {\n        return [person[i][0] * 1000, getNumberWithDecimal(person[i][4], 1)];\n      });\n      //策略分成收益\n      const fundPnlResult = person.map((x, i) => {\n        return [person[i][0] * 1000, getNumberWithDecimal(person[i][10], 1)];\n      });\n      const incomeValue = person.map((x, i) => {\n        return [person[i][0] * 1000, getNumberWithDecimal(person[i][6], 1)];\n      });\n      setUnrealizedPnl(unrealizedPnlResult);\n      setFundPnl(fundPnlResult);\n      setIsLoading(false);\n      setIncomeValue(incomeValue);\n    };\n\n    const fetchT1 = async () => {\n      const [\n        { data: unrealized_dividend },\n        { data: user_unrealized_dividend },\n        { data: user_table },\n      ] = await Promise.all([\n        axios.get(\n          `https://raw.githubusercontent.com/odofmine/fund/main/t1/st/unrealized_dividend.json`\n        ),\n        axios.get(\n          `https://raw.githubusercontent.com/odofmine/fund/main/t1/st/user_unrealized_dividend.json`\n        ),\n        axios.get(\n          `https://raw.githubusercontent.com/odofmine/fund/main/t1/st/user_table.json`\n        ),\n      ]);\n      if (unrealized_dividend.length > 0) {\n        const unrealizedDividendValue = getNumberWithDecimal(\n          unrealized_dividend[unrealized_dividend.length - 1][1],\n          1\n        );\n        setUnrealizedDividend(unrealizedDividendValue);\n      }\n      const userUnrealizedDividendResult = Object.keys(\n        user_unrealized_dividend\n      );\n      const userTable = Object.keys(user_table);\n      const userTableData = userTable.map((item) => {\n        const data = user_table[item];\n        return {\n          name: item,\n          total: data[0],\n          unrealizedPnl: data[1],\n          unrealizedAllocation: data[2],\n          real: data[3],\n        };\n      });\n      const userTableDataTotal = userTableData.reduce(\n        (acc, curr) => {\n          return {\n            name: \"all\",\n            total: acc.total + curr.total,\n            unrealizedPnl: acc.unrealizedPnl + curr.unrealizedPnl,\n            unrealizedAllocation:\n              acc.unrealizedAllocation + curr.unrealizedAllocation,\n            real: acc.real + curr.real,\n          };\n        },\n        {\n          name: \"all\",\n          total: 0,\n          unrealizedPnl: 0,\n          unrealizedAllocation: 0,\n          real: 0,\n        }\n      );\n      const series = userUnrealizedDividendResult.map((item) => {\n        const data = user_unrealized_dividend[item];\n        const step = (data[0][0] - 1588291200) / 60 / 60 / 24;\n        const prefix = Array.from({ length: step }, (x, i) => [\n          1588291200 + i * 24 * 60 * 60,\n          0,\n        ]);\n        return {\n          name: item,\n          type: \"line\",\n          areaStyle: {},\n          data: [...prefix, ...data].map((x) => [\n            x[0] * 1000,\n            getNumberWithDecimal(x[1], 1),\n          ]),\n          stack: \"userUnrealizedDividend\",\n          showSymbol: false,\n          hoverAnimation: true,\n          lineStyle: {\n            width: 0,\n          },\n        };\n      });\n      setUserTable([...userTableData, userTableDataTotal]);\n      setUserUnrealizedDividendSeries(series);\n    };\n    if (user === \"t1\") {\n      fetchT1();\n    }\n    fetchCharts();\n  }, [user]);\n\n  const userOption = {\n    baseOption: {\n      title: {\n        text: \"待分配利润\",\n        textStyle: {\n          fontSize: 20,\n        },\n      },\n      series: userUnrealizedDividendSeries,\n      tooltip: {\n        trigger: \"axis\",\n        axisPointer: {\n          type: \"cross\",\n          label: {\n            backgroundColor: \"#6a7985\",\n          },\n        },\n      },\n      legend: {\n        right: 0,\n        top: 3,\n      },\n      grid: {\n        left: \"3%\",\n        right: \"4%\",\n        bottom: \"3%\",\n        containLabel: true,\n      },\n      xAxis: {\n        type: \"time\",\n        boundaryGap: false,\n        splitLine: {\n          show: false,\n        },\n        axisLine: {\n          lineStyle: {\n            color: \"#888\",\n          },\n        },\n      },\n      yAxis: {\n        type: \"value\",\n        axisLabel: {\n          show: true,\n          formatter: \"{value}\",\n        },\n        splitNumber: 3,\n        axisLine: {\n          lineStyle: {\n            color: \"#888\",\n          },\n        },\n      },\n    },\n    media: [\n      {\n        query: {\n          maxWidth: 760,\n        },\n        option: {\n          title: {\n            text: \"待分配利润\",\n            textStyle: {\n              fontSize: 12,\n            },\n          },\n          series: userUnrealizedDividendSeries,\n          tooltip: {\n            trigger: \"axis\",\n            axisPointer: {\n              type: \"cross\",\n              label: {\n                backgroundColor: \"#6a7985\",\n              },\n            },\n          },\n          legend: {\n            right: 0,\n            top: 3,\n          },\n          grid: {\n            left: \"3%\",\n            right: \"4%\",\n            bottom: \"3%\",\n            containLabel: true,\n          },\n          xAxis: {\n            type: \"time\",\n            boundaryGap: false,\n            splitLine: {\n              show: false,\n            },\n            axisLine: {\n              lineStyle: {\n                color: \"#888\",\n              },\n            },\n          },\n          yAxis: {\n            type: \"value\",\n            axisLabel: {\n              show: true,\n              formatter: \"{value}\",\n            },\n            splitNumber: 3,\n            axisLine: {\n              lineStyle: {\n                color: \"#888\",\n              },\n            },\n          },\n        },\n      },\n    ],\n  };\n\n  const option = {\n    title: {\n      text: \"持仓收益\",\n    },\n    tooltip: {\n      trigger: \"axis\",\n      // formatter: function (params) {\n      //   const date = new Date(params[0].data[0]);\n      //   const dateFormat = echarts.format.formatTime(\n      //     \"yyyy-MM-dd hh:mm:ss\",\n      //     date\n      //   );\n      //   var returnHtmT1 = params[0]\n      //     ? `${getNumberWithDecimal(params[0].data[1], 1)}`\n      //     : \"--\";\n      //   return `<span>${dateFormat}</span><br/><span>累计收益：${returnHtmT1}</span> <br/>`;\n      // },\n    },\n    legend: {\n      data: [\n        {\n          name: \"用户未实现收益\",\n          // 强制设置图形为圆。\n          // icon: \"circle\",\n        },\n        {\n          name: \"策略分成收益\",\n          // 强制设置图形为圆。\n          // icon: \"circle\",\n        },\n      ],\n      formatter: (name) => {\n        if (name === \"用户未实现收益\") {\n          return unRealizedPnl.length === 0\n            ? `${name} +0.0`\n            : `${name} ${getNumberFormat(\n                unRealizedPnl[unRealizedPnl.length - 1][1]\n              )}`;\n        }\n        if (name === \"策略分成收益\") {\n          return fundPnl.length === 0\n            ? `${name} +0.0`\n            : `${name} ${getNumberFormat(fundPnl[fundPnl.length - 1][1])}`;\n        }\n      },\n      right: 0,\n      top: 3,\n    },\n    grid: {\n      left: \"3%\",\n      right: \"4%\",\n      bottom: \"3%\",\n      containLabel: true,\n    },\n    xAxis: {\n      type: \"time\",\n      splitLine: {\n        show: false,\n      },\n      axisLine: {\n        lineStyle: {\n          color: \"#888\",\n        },\n      },\n    },\n    yAxis: {\n      type: \"value\",\n      axisLabel: {\n        show: true,\n        formatter: \"{value}\",\n      },\n      splitNumber: 3,\n      axisLine: {\n        lineStyle: {\n          color: \"#888\",\n        },\n      },\n    },\n    series: [\n      {\n        name: \"用户未实现收益\",\n        type: \"line\",\n        areaStyle: {},\n        data: unRealizedPnl,\n        itemStyle: {\n          color: \"rgb(73,151,247)\",\n        },\n        stack: \"总量\",\n        showSymbol: false,\n        hoverAnimation: true,\n      },\n      {\n        name: \"策略分成收益\",\n        type: \"line\",\n        areaStyle: {},\n        data: fundPnl,\n        itemStyle: {\n          color: \"rgb(105,193,111)\",\n        },\n        stack: \"总量\",\n        showSymbol: false,\n        hoverAnimation: true,\n      },\n    ],\n  };\n\n  const columns = [\n    {\n      title: \"日期\",\n      dataIndex: \"date\",\n      key: \"date\",\n    },\n    {\n      title: \"市值\",\n      dataIndex: \"marketValue\",\n      key: \"marketValue\",\n      render: (text, row, index) => {\n        return isNaN(text)\n          ? \"--\"\n          : getNumberWithDecimal(text, 1).toLocaleString();\n      },\n    },\n    {\n      title: \"收益额\",\n      dataIndex: \"incomeValue\",\n      key: \"incomeValue\",\n      render: (text) => {\n        return (\n          <span className={getNumberColor(text)}>{getNumberFormat(text)}</span>\n        );\n      },\n    },\n  ];\n\n  const userTableColumns = [\n    {\n      title: \"用户\",\n      dataIndex: \"name\",\n    },\n    {\n      title: \"总市值\",\n      dataIndex: \"total\",\n      render: (text) => text.toFixed(2),\n    },\n    {\n      title: \"未实现盈亏\",\n      dataIndex: \"unrealizedPnl\",\n      render: (text) => text.toFixed(2),\n    },\n    {\n      title: \"未分配收益\",\n      dataIndex: \"unrealizedAllocation\",\n      render: (text) => text.toFixed(2),\n    },\n    {\n      title: \"实际市值\",\n      dataIndex: \"real\",\n      render: (text) => text.toFixed(2),\n    },\n  ];\n\n  const columnsExchangeDetails = [\n    {\n      title: \"日期\",\n      dataIndex: \"datetime\",\n      key: \"datetime\",\n      render: (text) => dayjs(text * 1000).format(\"YYYY-MM-DD hh:mm:ss\"),\n    },\n    {\n      title: \"金额\",\n      dataIndex: \"Value\",\n      key: \"Value\",\n      render: (text, row, index) => {\n        const { price, amount } = row;\n        const result = Number(price) * Number(amount);\n        return (\n          <span className={getNumberColor(result)}>\n            {isNaN(result)\n              ? \"--\"\n              : getNumberFormat(getNumberWithDecimal(result, 1))}\n          </span>\n        );\n      },\n    },\n    {\n      title: \"净值\",\n      dataIndex: \"price\",\n      key: \"price\",\n      render: (text) => {\n        return <span>{getNumberWithDecimal(text, 4)}</span>;\n      },\n    },\n    {\n      title: \"份额\",\n      dataIndex: \"amount\",\n      key: \"amount\",\n      render: (text) => {\n        const result = Number(text);\n        return (\n          <span className={getNumberColor(result)}>\n            {isNaN(result)\n              ? \"--\"\n              : getNumberFormat(getNumberWithDecimal(result, 1))}\n          </span>\n        );\n      },\n    },\n  ];\n\n  const dataSource = (data) => {\n    if (data.length > 0) {\n      const result = data.reduce((acc, curr, index, arr) => {\n        const obj = {\n          date: dayjs(curr[0] * 1000).format(\"YYYY-MM-DD hh:mm:ss\"),\n          value:\n            index === 0 ? \"--\" : getNumberWithDecimal(arr[index - 1][1], 4),\n          cost: curr[2],\n          share: getNumberWithDecimal(curr[3], 0),\n          key: curr[0],\n          incomeValue: getNumberWithDecimal(curr[9], 2),\n          marketValue: getNumberWithDecimal(curr[7], 1),\n        };\n        return [...acc, obj];\n      }, []);\n      return result;\n    } else {\n      return [];\n    }\n  };\n  const getLastestDataHandleValue = (data) => {\n    const len = data.length;\n    return len > 0 ? getNumberWithDecimal(data[len - 1][7], 4) : \"--\";\n  };\n  const getLastestDataCost = (data) => {\n    const len = data.length;\n    return len > 0 ? data[len - 1][2] : 0;\n  };\n  const getLastestDataShare = (data) => {\n    const len = data.length;\n    return len > 0 ? data[len - 1][3] : 0;\n  };\n\n  return (\n    <Layout className={className}>\n      <Divider className=\"divider\" />\n      <Content>\n        {user === \"t1\" ? (\n          <>\n            <Row gutter={24} className=\"content\">\n              <Col sm={24} xs={24}>\n                <Card title=\"T1 利润分配\">\n                  <Row style={{ marginBottom: \"24px\" }}>\n                    <Col sm={5} xs={12}>\n                      <Statistic\n                        title=\"待分配利润（USD）\"\n                        value={unrealizedDividend}\n                        precision={0}\n                      />\n                    </Col>\n                  </Row>\n                  <Row>\n                    <Col xs={24} className=\"card-left\">\n                      {\n                        <LineChart\n                          option={userOption}\n                          showLoading={isLoading}\n                        />\n                      }\n                    </Col>\n                  </Row>\n                </Card>\n              </Col>\n            </Row>\n            <Row gutter={24} className=\"content\">\n              <Col sm={24} xs={24}>\n                <Card title=\"收益明细\">\n                  <Table columns={userTableColumns} dataSource={userTable} />\n                </Card>\n              </Col>\n            </Row>\n          </>\n        ) : null}\n        <Row gutter={24} className=\"content\">\n          <Col sm={24} xs={24}>\n            <Card title={`${user} T1 策略持仓`}>\n              <Row style={{ marginBottom: \"24px\" }}>\n                <Col sm={5} xs={12}>\n                  <Statistic\n                    title=\"持仓市值（USD）\"\n                    value={getLastestDataHandleValue(personData)}\n                    precision={0}\n                  />\n                </Col>\n                <Col sm={5} xs={12}>\n                  <Statistic\n                    title=\"持仓收益（USD）\"\n                    value={\n                      personData.length > 0\n                        ? personData[personData.length - 1][4] +\n                          personData[personData.length - 1][10]\n                        : 0\n                    }\n                    precision={1}\n                    isNormal={false}\n                  />\n                </Col>\n                <Col sm={4} xs={12}>\n                  <Statistic\n                    title=\"持仓收益率\"\n                    value={\n                      personData.length > 0\n                        ? personData[personData.length - 1][8] * 100\n                        : 0\n                    }\n                    precision={2}\n                    suffix=\"%\"\n                    isNormal={false}\n                  />\n                </Col>\n                <Col sm={5} xs={12}>\n                  <Statistic\n                    title=\"持仓份额\"\n                    value={getLastestDataShare(personData)}\n                    precision={0}\n                  />\n                </Col>\n                <Col sm={5} xs={12}>\n                  <Statistic\n                    title=\"持仓成本(USD)\"\n                    value={getLastestDataCost(personData)}\n                    precision={4}\n                  />\n                </Col>\n              </Row>\n              <Row>\n                <Col xs={24} className=\"card-left\">\n                  {<LineChart option={option} showLoading={isLoading} />}\n                </Col>\n              </Row>\n            </Card>\n          </Col>\n        </Row>\n        <Row gutter={24} className=\"content\">\n          <Col sm={12} xs={24}>\n            <Card title=\"收益明细\">\n              <Table\n                columns={columns}\n                dataSource={dataSource([...personData].reverse())}\n              />\n            </Card>\n          </Col>\n          <Col sm={12} xs={24}>\n            <Card title=\"交易明细\">\n              <Table columns={columnsExchangeDetails} dataSource={dw} />\n            </Card>\n          </Col>\n        </Row>\n      </Content>\n    </Layout>\n  );\n};\n\nexport const Details = styled(DetailsComponent)`\n  .p-24 {\n    padding: 24px;\n  }\n  .m-t-24 {\n    margin-top: 24px;\n  }\n  .m-b-24 {\n    margin-bottom: 24px;\n  }\n  .divider {\n    border-color: #000;\n    opacity: 0.8;\n    margin: 0;\n  }\n  .content {\n    padding-top: 40px;\n    max-width: 1120px;\n    margin: 0 auto !important;\n  }\n\n  .green {\n    color: #3f8600;\n  }\n  .red {\n    color: #cf1322;\n  }\n  .grey {\n    color: rgba(19, 24, 31, 0.6);\n  }\n`;\n"],"sourceRoot":""}